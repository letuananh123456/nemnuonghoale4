function CommonServiceTerm($rootScope,$cookies,$q,ServerUtilityService,$localStorage,$routeParams,$log,$http){function isLeapYear(year){return!(year%4)&&year%100||!(year%400)}function calculateAssociationId(custInfo){var dob=that.extractDOB(custInfo.dob),dobYear=dob.dobYear,mobileNoEnd=custInfo.mobileNo.toString().substr(-5);return dobYear.toString().concat(mobileNoEnd)}function callDataLoggingICICI(quotes,custInfo,ip){var planObj={BasicPremium:850};if(null!==planObj&&void 0!==planObj){var req1={source:"63bf8794a82fdab4862b22590b25477daed7a963792d0d569c7ae8984a47128c42ab0af82797bf5ae4201062b7d7d636",message:"PB SOURCE TERM",encryptedMobileNo:custInfo.encryptedMobileNo,year:custInfo.dob.split("-")[2],properties:{amount:planObj.BasicPremium,gender:1*custInfo.gender===1?"Male":"Female",cardType:"ICICI BANK",mobileNo:"9777777777",emailID:"abc@xyz.com",productCode:$rootScope.cancerJourney?"T49":"T51",vendorUid:"1234",associationId:calculateAssociationId(custInfo),premium:planObj.BasicPremium,deviceId:"19 Jun 1989",ipAddress:ip,message:"PB SOURCE TERM"}};req1.source="63bf8794a82fdab4862b22590b25477daed7a963792d0d569c7ae8984a47128c42ab0af82797bf5ae4201062b7d7d636",req1.properties&&req1.properties.associationId&&1*req1.properties.associationId.length===9&&ServerUtilityService.postWebService(iciciAttributionUrl,req1).success(function(data,status,headers,config){}).error(function(data,status,headers,config){})}}function addZero(i){return i<10&&(i="0"+i),i}function urlB64ToUint8Array(base64String){const padding="=".repeat((4-base64String.length%4)%4),base64=(base64String+padding).replace(/\-/g,"+").replace(/_/g,"/"),rawData=window.atob(base64),outputArray=new Uint8Array(rawData.length);for(var i=0;i<rawData.length;++i)outputArray[i]=rawData.charCodeAt(i);return outputArray}function subscribeUserToPush(){return navigator.serviceWorker.register("/ServiceWorker.js").then(function(registration){const subscribeOptions={userVisibleOnly:!0,applicationServerKey:urlB64ToUint8Array("BKh74zihlsFPTHKmGOXc-rep4ppV0RPLXeXyd5ow06YRCZZeJqOqVvBjRmKr5LXPX827ABgAclfzYdqo-7xs08U")};return registration.pushManager.subscribe(subscribeOptions)}).then(function(pushSubscription){return pushSubscription})}var cityUrl="./json/city.json",regexForCountryUrl="/api/regex/country",revisitUrl="/api/matrix/revisit",getCountryCodesUrl="./json/contry-t.json",riderSelectedUrl="/api/category",updateCalled="load",spouseUrl="/api/family",spouseDobUrl="/api/save/spouse",prePaymentUrl=termConfigObj.getPrePaymentUrl(),paymentInitiateUrl=termConfigObj.getPaymentInitiateUrl(),annualIncomeSaveUrl="/api/save/annualIncome/",npvCalculationUrl="/api/npvCalculate",clickToCallUrl="/api/update/clickToCall",attributionCancerQuotesUrl="api/attibution/cancer/quotes";iciciAttributionUrl="api/attibution/icici/quotes",pushNotification="/api/push/notification";var that=this,cityObject={},saveRevisitLogUrl=termConfigObj.getRevisitLoggingUrl(),isReferralLeadUrl=termConfigObj.getReferralLeadUrl(),filterTypes=[],isCancerHeart=!1;this.setFilterTypes=function(types){filterTypes=types},this.isChildPlan=function(planId){return 1*planId===756},this.isSbiEshieldPlan=function(planId){return 1*planId===891},this.getNewAegonPlans=function(){var arr=[818,819,820,821];return arr},this.setisCancerHeart=function(status){isCancerHeart=status},this.getisCancerHeart=function(){return isCancerHeart},this.isFGCancerProtect=function(planId){return planId=parseInt(planId,10),811==planId},this.changeCancerName=function(planType){1*planType===1?($rootScope.cancerName="Cancer Insurance",$rootScope.cancerType=1):1*planType===2?($rootScope.cancerName="Heart Insurance",$rootScope.cancerType=2):($rootScope.cancerName="Cancer + Heart",$rootScope.cancerType=3)},this.getFilterTypes=function(){return filterTypes},this.isBSLIPlan=function(planId){return planId=parseInt(planId,10),800==planId||801==planId||802==planId||8011==planId||8012==planId||8111==planId||8112==planId||8211==planId||8212==planId||906===planId||9061===planId||9062===planId||908===planId||9081===planId||9082===planId||909===planId||9091===planId||9092===planId||945===planId||946===planId},this.isMAXPlan=function(planId){var planId=parseInt(planId,10);return 776==planId||777==planId||778==planId||778==planId||77611==planId},this.isTataPlan=function(planId){var planId=parseInt(planId,10);return 814==planId||697==planId},this.isPNBPlan=function(planId){return planId=parseInt(planId,10),749==planId||752==planId||753==planId||756==planId},this.isEtPlan=function(planId){return planId=parseInt(planId,10),732==planId||735==planId||758==planId||911==planId||912==planId},this.getGstConstant=function(){return 1.18},this.getEtMinimumMonthlyPremium=function(){return 500*that.getGstConstant()},this.cancerMaxPlan=function(planId){var planId=parseInt(planId,10);return 779==planId},this.isLICPlan=function(planId){var planId=parseInt(planId,10);return 847==planId},this.isAvivaPlan=function(planId){var planId=parseInt(planId,10);return 844==planId||845==planId||846==planId},this.isAegonPlan=function(planId){var planId=parseInt(planId,10);return 787==planId||789==planId},this.isAegonItermPlusPlan=function(planId){var planId=parseInt(planId,10);return 818==planId||819==planId||820==planId||821==planId},this.isAegonWholeLifePlan=function(planId){var planId=parseInt(planId,10);return 787==planId},this.isBaxaNewPlans=function(planId){return planId=parseInt(planId,10),831===planId||832===planId||833===planId},this.isRelianceDigiTermPlans=function(planId){return planId=parseInt(planId,10),921===planId||922===planId||923===planId||924===planId||925===planId||926===planId||927===planId},this.setPreviousLeadId=function(lead){$cookies.put("previousLeadId",lead,{domain:"policybazaar.com"})},this.getPreviousLeadId=function(){return $cookies.get("previousLeadId")},this.isHdfc3dPlan=function(planId){var planId=parseInt(planId,10),hdfc3dPlans=[2691,849,850,851,8491,8492,8501,8502,852,853,854,855,8886,2681,2701,2711];return hdfc3dPlans.indexOf(planId)!=-1},this.isAegoniTermForverPlan=function(planId){var planId=parseInt(planId,10),iTermForverPlan=[879,8791,8792];return iTermForverPlan.indexOf(planId)!=-1},this.isKotakPlan=function(planId){var planId=parseInt(planId,10),isKotakPlan=[883,884,885,2931,2911,2961,2941,2991,2971];return isKotakPlan.indexOf(planId)!=-1},this.isETZindagiPlan=function(planId){var planId=parseInt(planId,10),isETZindagiPlan=[911,912,9112,9122];return isETZindagiPlan.indexOf(planId)!=-1},this.isAvivaIsmartPlan=function(planId){var planId=parseInt(planId,10),planIds=[900];return planIds.indexOf(planId)!=-1},this.isHdfcTropPlan=function(planId){var planId=parseInt(planId,10),hdfcTropPlans=[850,8501,8502];return hdfcTropPlans.indexOf(planId)!=-1},this.isHdfcIncomeOptionPlan=function(planId){var planId=parseInt(planId,10),hdfcIncomeOptionPlans=[853,8521,8522,8531,8532,8542,852,854,855,8541,8551,8552,2711];return hdfcIncomeOptionPlans.indexOf(planId)!=-1},this.isHdfcIncomeOptionIncreasingPlan=function(planId){var planId=parseInt(planId,10),hdfcIncomeOptionIncreasingPlans=[853,8531,8532,855,8551,8552];return hdfcIncomeOptionIncreasingPlans.indexOf(planId)!=-1},this.isOneTimePayoutEditable=function(planId){var planId=parseInt(planId,10),hdfcIncomeOptionPlans=[853,8521,8522,8531,8532,852,271,2711,2712];return hdfcIncomeOptionPlans.indexOf(planId)!=-1},this.getEnquiryId=function(){return $localStorage.enquiryId||$cookies.get("enquiryId")},this.setUpdateCalled=function(value){updateCalled=angular.copy(value)},this.getUpdateCalled=function(){return updateCalled},this.getCountryNameById=function(id){var arr=[{CountryCodeId:24,CountryName:"AUSTRALIA",CountryCode:61},{CountryCodeId:35,CountryName:"BAHRAIN",CountryCode:973},{CountryCodeId:392,CountryName:"INDIA",CountryCode:91},{CountryCodeId:164,CountryName:"INDONESIA",CountryCode:62},{CountryCodeId:187,CountryName:"KUWAIT",CountryCode:965},{CountryCodeId:217,CountryName:"MALAYSIA",CountryCode:60},{CountryCodeId:271,CountryName:"OMAN",CountryCode:968},{CountryCodeId:288,CountryName:"QATAR",CountryCode:974},{CountryCodeId:308,CountryName:"SAUDI ARABIA",CountryCode:966},{CountryCodeId:313,CountryName:"SINGAPORE",CountryCode:65},{CountryCodeId:375,CountryName:"UNITED ARAB EMIRATES",CountryCode:971},{CountryCodeId:376,CountryName:"UNITED KINGDOM",CountryCode:44},{CountryCodeId:378,CountryName:"USA/CANADA",CountryCode:1},{CountryCodeId:999,CountryName:"OTHERS",CountryCode:111}],obj=_.find(arr,function(val){return 1*val.CountryCodeId===id});return void 0===obj||null===obj?"OTHERS":obj.CountryName},this.monthlyIncomeFactor=function(planId){var factorMap={IncomeFactor:[{PlanId:941,IncomeFactorMap:{5:.015,10:.0075,15:.005,20:.00375}},{PlanId:942,IncomeFactorMap:{5:.0166666666667,10:.0083333333333,15:.0055555555556,20:.0041666666667}}]};return factorMap.IncomeFactor.filter(function(fac){return fac.PlanId==planId})},this.isEmptyObject=function(obj){for(var prop in obj)if(obj.hasOwnProperty(prop))return!1;return!0},this.setRiderSelected=function(custId,categoryIds){var input={custId:custId,categoryIds:categoryIds,landingPageName:that.getLandingPageName()};return ServerUtilityService.postWebService(riderSelectedUrl,input).success(function(data,status,headers,config){return data}).error(function(data,status,headers,config){return data})},this.getNpv=function(quotes){var input=[];return _.each(quotes,function(quote){1*quote.monthlyIncome>0&&input.push({monthlyIncome:quote.monthlyIncome||quote.MonthlyIncome,planId:quote.Plan_Id,planAnnualIncomeMonth:quote.PlanAnnualIncomeMonth||quote.planAnnualIncomeMonth,oneTimePayout:quote.OneTimePayout||quote.oneTimePayout,interestRate:quote.interestRate||quote.InterestRate,interestType:quote.interestType||quote.InterestType})}),ServerUtilityService.postWebService(npvCalculationUrl,input).success(function(data,status,headers,config){return data}).error(function(data,status,headers,config){return data})},this.getCity=function(){var url=cityUrl;return ServerUtilityService.getWebService(url).success(function(data,status,headers,config){}).error(function(data,status,headers,config){return data})},this.getAge=function(dateString){var age=null;if(dateString){dateString=that.changeDateTommddYY(dateString);var today=new Date,birthDate=new Date(dateString),m=today.getMonth()-birthDate.getMonth();age=today.getFullYear()-birthDate.getFullYear(),(m<0||0===m&&today.getDate()<birthDate.getDate())&&age--}return age},this.changeDateTommddYY=function(dateString){var arrDateString=dateString.split("-");return arrDateString[1]+"/"+arrDateString[0]+"/"+arrDateString[2]},this.getCityData=function(){var deferred=$q.defer();return that.isEmptyObject(cityObject)?that.getCity().success(function(data){cityObject=data,deferred.resolve(cityObject)}).error(function(data){}):deferred.resolve(cityObject),deferred.promise},this.getCountryCodes=function(){var deferred=$q.defer();return that.getCountryCodesFromJSON().success(function(data,status,headers,config){deferred.resolve(data)}),deferred.promise},this.getCountryCodesFromJSON=function(){return ServerUtilityService.getWebService(getCountryCodesUrl).success(function(data,status,headers,config){return data}).error(function(data,status,headers,config){return data})},this.getCountryOfClient=function(){var url="/api/country";return ServerUtilityService.getWebService(url).success(function(data,status,headers,config){return data}).error(function(data,status,headers,config){return data})},this.getRegexForCountry=function(countryCodeId){var url=regexForCountryUrl+"/"+countryCodeId;return ServerUtilityService.getWebService(url).success(function(data,status,headers,config){return data}).error(function(data,status,headers,config){return data})},this.getValidCityEntered=function(name,cityList){var cityObj={};return"Andman & Nicobar"==name&&(name="AndmanandNicobar"),cityObj=_.find(cityList,function(val){if(name&&name.indexOf("(")>-1)return val.CityName==name;var txt=val.CityName.replace(/ /g,""),index=val.CityName.replace(/ /g,"").indexOf("(");return txt=txt.substr(0,index).replace(/ /g,""),name&&txt.toLowerCase()===name.toLowerCase()?val:void 0})},this.baxaMarketingOffer=function(){return!(!angular.isDefined($routeParams.offerid)||!$cookies.get("pid")||$cookies.get("pid")!=termConfigObj.getBAXASupplier())},this.isValidAmount=function(amount,isMonthlyIncomeJourney,cancerJourney,groupTermJourney){var limits=that.getLimitsForCancer(isMonthlyIncomeJourney,cancerJourney),allowedAmount=limits.allowedAmount,maxAllowedAmt=limits.maxAllowedAmt;return that.baxaMarketingOffer()&&(allowedAmount=25e5),groupTermJourney&&(allowedAmount=5e4),that.removeCommas(amount)>=allowedAmount&&that.removeCommas(amount)<=maxAllowedAmt},this.validAmountLimits=function(amount,isMonthlyIncomeJourney,cancerJourney,groupTermJourney){var limits=that.getLimitsForCancer(isMonthlyIncomeJourney,cancerJourney),allowedAmount=limits.allowedAmount,maxAllowedAmt=limits.maxAllowedAmt;return that.baxaMarketingOffer()&&(allowedAmount=25e5),groupTermJourney&&(allowedAmount=5e4),{min:allowedAmount,max:maxAllowedAmt}},this.getLimitsForCancer=function(isMonthlyIncomeJourney,cancerJourney){var isCancerHeart=that.getisCancerHeart(),allowedAmount=1e6,maxAllowedAmt=2e8;isMonthlyIncomeJourney&&(allowedAmount=3e4,maxAllowedAmt=2e6),cancerJourney&&(allowedAmount=2e5,maxAllowedAmt=5e6,isCancerHeart&&(allowedAmount=1e6,maxAllowedAmt=8e6));var obj={};return obj.allowedAmount=allowedAmount,obj.maxAllowedAmt=maxAllowedAmt,obj},this.getmaxTerm=function(age){var maxTempTerm=0;return 70-age<=40?75-age>40?maxTempTerm=70:(maxTempTerm=75-age,maxTempTerm>20&&maxTempTerm+age>70&&(maxTempTerm=70-age<20?20:70-age)):maxTempTerm=70-age,maxTempTerm},this.removeCommas=function(x){var returnedAmount=0;return void 0!==x&&null!==x&&(x=x.toString(),void 0!==x&&null!==x&&null!=x.match(/\d+/g)&&(returnedAmount=isNaN(x)?x.replace(/,/g,""):x)),returnedAmount},this.wacky_round=function(number,places){var multiplier=Math.pow(10,places+2),fixed=Math.round(number*multiplier);return fixed=Math.floor(fixed/10),fixed/Math.pow(10,places+1)},this.changeDisplayNumberFormat=function(num){num=parseInt(num,10),num=num.toString();var numLength=num.length,displayNum="",suffix="";return 4==numLength||5==numLength?(displayNum=num/1e3,displayNum=Math.round(1e3*this.wacky_round(displayNum,1))):6==numLength||7==numLength?(displayNum=num/1e5,displayNum=Math.round(1e5*this.wacky_round(displayNum,1))):8==numLength||9==numLength||10==numLength?(displayNum=num/1e7,displayNum=Math.round(1e7*this.wacky_round(displayNum,1))):displayNum=num,displayNum=parseInt(displayNum,10).toString(),numLength=displayNum.length,suffix="",4==numLength||5==numLength?(displayNum/=1e3,suffix="K"):6==numLength?(displayNum/=1e5,suffix="Lac"):7==numLength?(displayNum/=1e5,suffix="Lac"):8==numLength||9==numLength||10==numLength?(displayNum/=1e7,suffix="Cr"):displayNum=num,displayNum+" "+suffix},this.getDaysFromToday=function(date){var arr=date.split("-"),date1=new Date(arr[2],arr[1],arr[0],0,0,0,0),date2=new Date,ONE_DAY=864e5,date1_ms=date1.getTime(),date2_ms=date2.getTime(),difference_ms=Math.abs(date1_ms-date2_ms);return Math.round(difference_ms/ONE_DAY)},this.getDateList=function(max){for(var dateList=[],i=1;i<=max;i++)i<=9?dateList.push("0"+i):dateList.push(i.toString());return dateList},this.populateDates=function(month,year){var dates=[];return dates=1*month===4||1*month===6||1*month===9||1*month===11?that.getDateList(30):1*month===2?isLeapYear(year)?that.getDateList(29):that.getDateList(28):that.getDateList(31)},this.getChildYearList=function(){for(var currentYear=(new Date).getFullYear(),min=currentYear-66,max=currentYear,yearList=[],i=max;i>=min;i--)yearList.push(i);return yearList};var getValue=function(value){return angular.isDefined(value)?value:null};this.extractDOB=function(dob){var data={};return data.dobDate=getValue(dob)?that.extractDateMonthYearFromDOB(dob,0):null,data.dobMonth=getValue(dob)?that.extractDateMonthYearFromDOB(dob,1):null,data.dobYear=getValue(dob)?that.extractDateMonthYearFromDOB(dob,2):null,data},this.extractDateMonthYearFromDOB=function(dobString,index){var dobArray=[];return dobArray=dobString.indexOf("-")>=0?dobString.split("-"):dobString.split(","),String(parseInt(dobArray[index],10))},this.createForm=function(url,params){var jForm=$("<form></form>");return jForm.attr("action",url),jForm.attr("method","post"),jForm.attr("enctype",params),jForm},this.createInputFields=function(name,params){var jInput=$("<input type='hidden'>");return jInput.attr("name",name),jInput.attr("value",params),jInput},this.isAgeWithRange=function(dob,relation){if(void 0!==dob&&null!==dob){var days=that.getDaysFromToday(dob);return 2!=relation||days>90}return!0},this.isUndefinedOrNullOrEmpty=function(val){return angular.isUndefined(val)||null===val||!val||"null"===val||"undefined"===val||""===val},this.closestToNumber=function(coverages,num){var newArray=[];coverages.push(num),newArray=angular.copy(coverages),newArray=newArray.sort(function(a,b){return a-b});var pos=newArray.indexOf(num),number=0;return number=newArray[pos+1]-num>=num-newArray[pos-1]?newArray[pos-1]:newArray[pos+1]},this.getAnnualIncomeBoundry=function(){return[{id:6,max:1599999,min:15e4},{id:5,max:1499999,min:1e6},{id:4,max:999999,min:7e5},{id:3,max:699999,min:5e5},{id:2,max:499999,min:3e5},{id:8,max:299999,min:2e5},{id:7,max:199999,min:0}]},this.getTopCitiesList=function(){return[{id:551,name:"Delhi",stateId:35,state:"Delhi"},{id:207,name:"Bengaluru",stateId:16,state:"Karnataka"},{id:302,name:"Mumbai",stateId:20,state:"Maharashtra"},{id:309,name:"Pune",stateId:20,state:"Maharashtra"},{id:837,name:"Hyderabad",stateId:37,state:"Telangana"},{id:555,name:"Gurgaon",stateId:36,state:"NCR"},{id:103,name:"Ahmedabad",stateId:11,state:"Gujarat"},{id:541,name:"Kolkata",stateId:34,state:"West Bengal"},{id:554,name:"Ghaziabad",stateId:36,state:"NCR"},{id:420,name:"Chennai",stateId:30,state:"Tamil Nadu"},{id:666,name:"Navi Mumbai",stateId:20,state:"Maharashtra"},{id:411,name:"Jaipur",stateId:28,state:"Rajasthan"},{id:553,name:"Noida",stateId:36,state:"NCR"},{id:316,name:"Thane",stateId:20,state:"Maharashtra"},{id:80,name:"Chandigarh",stateId:6,state:"Chandigarh"},{id:499,name:"Lucknow",stateId:32,state:"Uttar Pradesh"}]},this.callLeadGenerationTracking=function(leadId,custId,isLeadCreated,isCancer){if(void 0!==isLeadCreated){var lead=[],cancer=isCancer||!1;lead.push(leadId);var isCreated=!!isLeadCreated&&"false"!==isLeadCreated;isCreated?gtmObj.leadGeneration(lead,custId,!0,cancer):gtmObj.leadGeneration(lead,custId,!1,cancer)}},this.isSpouseAgeValid=function(age){return age=parseInt(age,10),age>=18&&age<=65},this.buildSpouseInputObject=function(modifySelection,enquiryId){var input={};return input.age=modifySelection.spouse.age,input.isWorking=modifySelection.spouse.isWorking,input.tobacco=modifySelection.spouse.tobacco,input.refId=enquiryId,input.visitId=modifySelection.visitId,input},this.updateSpouseDetails=function(modifySelection,enquiryId){var input=this.buildSpouseInputObject(modifySelection,enquiryId);return ServerUtilityService.postWebService(spouseUrl,input).success(function(data,status,headers,config){return data}).error(function(data,status,headers,config){return data})},this.clickToCall=function(encodedLeadId){var input={encodedLeadId:encodedLeadId};return ServerUtilityService.postWebService(clickToCallUrl,input).success(function(data,status,headers,config){return data}).error(function(data,status,headers,config){return data})},this.buildSpouseInputDobObject=function(modifySelection,enquiryId){var input={};return input.spouseDob=modifySelection.spouse.dob,input.isWorking=modifySelection.spouse.isWorking,input.isTobacco=modifySelection.spouse.tobacco,input.enquiryId=enquiryId,input.visitId=modifySelection.visitId,input},this.updateSpouseDob=function(modifySelection,enquiryId,planId){var input=this.buildSpouseInputDobObject(modifySelection,enquiryId);return input.planId=planId,ServerUtilityService.postWebService(spouseDobUrl,input).success(function(data,status,headers,config){return data}).error(function(data,status,headers,config){return data})},this.getSpouseData=function(enquiryId){var url=spouseDobUrl+"/"+enquiryId;return ServerUtilityService.getWebService(url).success(function(data,status,headers,config){return data}).error(function(data,status,headers,config){return data})},this.saveRevisitLog=function(leadId,productId){var input={LeadID:leadId,ProductID:productId,Isrevisit:!0};return ServerUtilityService.postWebService(saveRevisitLogUrl,input).success(function(data,status,headers,config){return data}).error(function(data,status,headers,config){return data})},this.getReferralLead=function(leadId){var deferred=$q.defer(),referralLeadUrl=isReferralLeadUrl+leadId;return ServerUtilityService.getWebService(referralLeadUrl).success(function(data,status,headers,config){deferred.resolve(data)}).error(function(data,status,headers,config){deferred.resolve(data)}),deferred.promise},this.saveAnnualIncome=function(annualIncome){var url=annualIncomeSaveUrl+that.getEnquiryId()+"?annualIncome="+annualIncome;return ServerUtilityService.getWebService(url).success(function(data,status,headers,config){return data}).error(function(data,status,headers,config){return data})},this.addYahooTag=function(url){var elem=document.createElement("img");elem.setAttribute("src",url),elem.setAttribute("height","1"),elem.setAttribute("width","1"),elem.setAttribute("style","display:none"),document.body.insertBefore(elem,document.body.firstChild)},this.loadScript=function(url,type,charset,c){if(void 0===type&&(type="text/javascript"),url){var script=document.querySelector("script[src*='"+url+"']");if(!script){var heads=document.getElementsByTagName("head");if(heads&&heads.length){var head=heads[0];head&&(script=document.createElement("script"),script.setAttribute("src",url),script.setAttribute("type",type),charset&&script.setAttribute("charset",charset),head.appendChild(script),c&&script.addEventListener("load",function(e){c(null,e)},!1))}}return script}},this.setShouldPageSkipCookie=function(){var now=new Date,time=now.getTime();time+=36e5,now.setTime(time),$cookies.put("shouldPageSkip",!0,{expires:now.toUTCString()})},this.getMaxPaymentTermForET=function(age,policyTerm){var limit=5;return age>=18&&age<=35&&policyTerm>=45&&policyTerm<=62?limit=25:age>=18&&age<=45&&policyTerm>=35&&policyTerm<=62?limit=20:age>=18&&age<=55&&policyTerm>=25&&policyTerm<=62?limit=15:age>=18&&age<=65&&policyTerm>=15&&policyTerm<=62&&(limit=10),limit},this.getListTillLast=function(list,last){if(last&&last>0){var index=list.indexOf(last)+1;return list.splice(0,index)}return list},this.createRevisit=function(obj){var postData=JSON.stringify({leadId:obj.leadId,productId:obj.productId,pageName:obj.pageName});ServerUtilityService.postWebService(revisitUrl,postData).success(function(data,status,headers,config){}).error(function(data,status,headers,config){})},this.prePaymentApi=function(obj){return ServerUtilityService.postWebService(prePaymentUrl,obj).success(function(data,status,headers,config){return data}).error(function(data,status,headers,config){})},this.paymentInitiate=function(dataToPost){return ServerUtilityService.postWebService(paymentInitiateUrl,dataToPost).success(function(data,status,headers,config){return data}).error(function(data,status,headers,config){})},this.getCancerCareProductId=function(){return 1*$localStorage.cancerPlanType===3?"7":(1*$localStorage.cancerPlanType===2,"7")},this.isTROP=function(planId){var id=parseInt(planId,10);if(736===id||697===id||681===id||850===id||8501===id||8502===id||846===id)return!0},this.loadICICITracking=function(quotes,modifySelection,ipAddress){window.dataLogging?callDataLoggingICICI(quotes,modifySelection,ipAddress):that.loadScript(termConfigObj.getInsurerTagURL("icici"),"text/javascript","utf-8",function(){callDataLoggingICICI(quotes,modifySelection,ipAddress)}),callDataLoggingICICI(quotes,modifySelection,ipAddress)},this.getFirstName=function(name){return name.split(" ")[0]},this.getLastName=function(name){var arr=name.split(" ");return arr.splice(0,1),arr.join(" ")},this.toggleRiderHidden=function(categoryId,riderObj,isHidden){return _.each(riderObj,function(rider){1*rider.categoryId===categoryId&&(rider.isHidden=isHidden,rider.isHidden&&(rider.isSelected=!1))}),riderObj},this.enableRider=function(categoryId,riderObj){_.each(riderObj,function(rider){1*rider.categoryId===categoryId&&rider.isHidden&&(rider.isHidden=!1)})},this.getDateInFormat=function(){var todayDate=new Date,date=todayDate.getDate()+"/"+todayDate.getMonth()+"/"+todayDate.getFullYear(),hours=todayDate.getHours(),name="AM";return hours>12?(hours-=12,name="PM"):0===hours&&(hours=12,name="AM"),name="PM",date=date+" "+addZero(hours)+":"+addZero(todayDate.getMinutes())+" "+name},this.loadInvincibleScript=function(leadId){var pid=$rootScope.cancerJourney?that.getCancerCareProductId():7,ld=leadId,m3_u=("https:"===location.protocol?"https:":"http:")+"//www.invincibleiq.com/details/ck",m3_r=Math.floor(99999999999*Math.random()),charSet=(document.createElement("script"),document.charset?"/charset:"+document.charset:document.characterSet?"/charset:"+document.characterSet:""),customScr=m3_u+"/cid:0/pid:"+pid+"/ld:"+ld+"/aid:1/cb:"+m3_r+charSet;that.loadScript(customScr,"text/javascript","utf-8")},this.getCityName=function(city,plan){var planId=plan.planId||plan.Plan_Id;if(that.isMAXPlan(planId)||that.cancerMaxPlan(planId)){if(city)return"gurgaon"==city.toLowerCase()?"Gurugram":city}else if(1*plan.Supplier_Id===22&&city){if(null!==city.toLowerCase().match("alappuzha")||null!==city.toLowerCase().match("alleppey"))return"ALAPPUZHA-ALLEPPEY (KERALA)";if(null!==city.toLowerCase().match("gurgaon"))return"GURUGRAM-GURGAON (HARYANA)";if(null!==city.toLowerCase().match("navi mumbai"))return"NAVI MUMBAI - NEW MUMBAI (MAHARASHTRA)";if(null!==city.toLowerCase().match("mumbai"))return"MUMBAI (MAHARASHTRA)";if(null!==city.toLowerCase().match("bengaluru"))return"BENGALURU (KARNATAKA)";if(null!==city.toLowerCase().match("mangalore"))return"MANGALORE - MANGALURU (KARNATAKA)";if(null!==city.toLowerCase().match("vadodara"))return"VADODARA (GUJARAT)";if(null!==city.toLowerCase().match("delhi")||null!==city.toLowerCase().match("new delhi"))return"NEW DELHI (DELHI)"}return city},this.setPlanId=function(planId){var basePlanId=0;return 1*planId===849||1*planId===2681||1*planId===2691?basePlanId=849:1*planId===851||1*planId===2701?basePlanId=851:1*planId===852||1*planId===2711?basePlanId=852:1*planId===3227||1*planId===3178||1*planId===790?basePlanId=790:1*planId===883||1*planId===2931||1*planId===2911?basePlanId=883:1*planId===884||1*planId===2941||1*planId===2961?basePlanId=884:1*planId===885||1*planId===2971||1*planId===2991?basePlanId=885:1*planId!==940&&1*planId!==4371&&1*planId!==4381&&1*planId!==4391&&1*planId!==4401||(basePlanId=940),basePlanId},this.callAttributionApi=function(obj,isCancer,plan){var planId=plan.Plan_Id||plan.planId,url=attributionCancerQuotesUrl,postData={name:obj.name,gender:obj.gender,mobileNo:obj.mobileNo,dob:obj.dob,encryptedMobileNo:obj.encryptedMobileNo};isCancer||(postData.code="CTP",postData.category="Term"),postData=JSON.stringify(postData),ServerUtilityService.postWebService(url,postData).success(function(data,status,headers,config){isCancer?pbTrackerObj.logEvent({leadId:obj.matrixLeadId,custId:obj.custId,visitId:obj.visitId,event:"hdfc_attribution",pageName:"Quotes",productId:"Health",planId:planId}):pbTrackerObj.logEvent({leadId:obj.matrixLeadId,custId:obj.custId,visitId:obj.visitId,event:"hdfc_attribution",pageName:"Quotes",productId:"Term",planId:planId})}).error(function(data,status,headers,config){})},this.callKotakAttributionApi=function(obj,isCancer,plan){var planId=plan.Plan_Id||plan.planId,url="/api/attibution/kotak",postData={ProfileId:function(){var length;return obj.mobileNo&&obj.dob?(length=obj.mobileNo.length,obj.mobileNo[length-1]+obj.mobileNo[length-2]+obj.mobileNo[length-3]+obj.mobileNo[length-4]+obj.mobileNo[length-5]+obj.mobileNo[length-6]+obj.mobileNo[length-7]+obj.dob.split("-")[2]):null}(),ProductCode:"K92",PartnerCode:"POBZ",encryptedMobileNo:obj.encryptedMobileNo,year:obj.dob.split("-")[2]};postData=JSON.stringify(postData),ServerUtilityService.postWebService(url,postData).success(function(data,status,headers,config){pbTrackerObj.logEvent({leadId:obj.matrixLeadId,custId:obj.custId,visitId:obj.visitId,event:"kotak_attribution",pageName:"Quotes",productId:"Term",planId:planId})}).error(function(data,status,headers,config){})},this.getVariantPlanId=function(planId,variantId){return variantId!=-1&&0!=variantId||(852==planId||2711==planId?variantId=853:854==planId&&(variantId=855)),variantId},this.saveUTMSourcesToScope=function(data){$rootScope.utmCampaign=$rootScope.utmCampaign||data.utmCampaign,$rootScope.utmMedium=$rootScope.utmMedium||data.utmMedium,$rootScope.utmTerm=$rootScope.utmTerm||data.utmTerm,$rootScope.utmSource=$rootScope.utmSource||data.utmSource},this.getLandingPageName=function(){var pageName;switch($rootScope.pageClass){case"quote":pageName="quotes";break;case"contact":pageName="prequotes2";break;case"home":pageName="prequotes1";break;case"product":pageName="product"}return pageName},this.isAegonItermForeverPlan=function(planId){var aegonItermForeverPlanId=879;return planId==aegonItermForeverPlanId},this.isIndiaFirstPlan=function(planId){var planIds=[940,941,942,943,9401,9411,9421,9431,4371,4381,4391,4401];return planIds.indexOf(planId)>-1},this.isBSLIUltimaPlan=function(planId){var planIds=[945,9452,946,9462];return planIds.indexOf(planId)>-1},this.hideSinglePayOptionType=function(planId){var planIds=[2691,2931,2961,2991,911,912,9112,9122];return planIds.indexOf(planId)>-1},this.calculateCancerHeartPayouts=function(totalPayout){var totalPayout=parseInt(that.removeCommas(totalPayout)),heartPayout=($rootScope.amountBoundry.heartPayout.max,$rootScope.amountBoundry.cancerPayout.max,totalPayout/2),remainder=heartPayout%$rootScope.amountBoundry.heartPayout.step;remainder&&(heartPayout+=remainder);var cancerPayout=totalPayout-heartPayout;return{heartPayout:heartPayout,cancerPayout:cancerPayout}},this.checkProfileValidityFG=function(planDetails,customerInfo){var statusFailed=!1;if(that.isFGCancerProtect(planDetails.planId)){var annualIncome=1*that.removeCommas(customerInfo.annualIncome),occupation=customerInfo.occupation,sumAssured=planDetails.sumAssured,planOptionType=8111===planDetails.fakePlanId?1:2;1===planOptionType?(annualIncome<6e5&&sumAssured>2e6?statusFailed=!0:annualIncome>=6e5&&annualIncome<8e5&&sumAssured>3e6&&(statusFailed=!0),("House Wife"==occupation||"Retired"==occupation||"Student"==occupation)&&sumAssured>2e6&&(statusFailed=!0)):(annualIncome<8e5&&sumAssured>1e6?statusFailed=!0:annualIncome>=8e5&&annualIncome<12e5&&sumAssured>2e6?statusFailed=!0:annualIncome>=12e5&&annualIncome<16e5&&sumAssured>3e6&&(statusFailed=!0),("House Wife"==occupation||"Retired"==occupation||"Student"==occupation)&&sumAssured>1e6&&(statusFailed=!0))}return statusFailed},this.getOccupationOptions=function(isFemale){var options=[];return options=isFemale?[{value:"Salaried"},{value:"A Business Woman"},{value:"Student"},{value:"Unemployed"},{value:"Retired"},{value:"Dependant"},{value:"House Wife"}]:[{value:"Salaried"},{value:"A Business Man"},{value:"Student"},{value:"Unemployed"},{value:"Retired"},{value:"Dependant"}]},this.getRealSupplierId=function(supplierId){var id=supplierId;switch(id){case 117:case 111:id=17;break;case 201:id=20;break;case 22:id=2;break;case 116:id=16;break;case 124:id=24;break;case 88:id=8;break;case 888:id=8;break;case 700:id=7;break;case 41:id=4;break;default:id=supplierId}return id},this.calculateCoveragesForExide=function(custinfo){var difference,maxTerm,coverages=[];return"undefined"!=typeof custinfo&&(difference=70-custinfo.age,maxTerm=difference>35?35:difference),maxTerm>0&&(coverages.push(maxTerm+1*custinfo.age+5),coverages.push(maxTerm+1*custinfo.age+10)),coverages},this.calculateCoveragesForExideForSinglePay=function(custinfo,coverageArr){
var coverages=[],selectedCoverage=custinfo.coverageUpto;if("undefined"!=typeof custinfo)for(var i=0;i<coverageArr.length;i++){var temp=coverageArr[i];temp>selectedCoverage?(temp-selectedCoverage)%5==0&&temp-custinfo.age>=5&&temp-custinfo.age<=35&&coverages.push(temp):(selectedCoverage-temp)%5==0&&temp-custinfo.age>=5&&temp-custinfo.age<=35&&coverages.push(temp)}return coverages},this.calculatepptForExide=function(coverageUpto,coverages){var ppt=5;return coverageUpto=parseInt(coverageUpto),coverages&&1===coverages.indexOf(coverageUpto)&&(ppt=10),ppt},this.isExidePlan=function(planId){return planId=parseInt(planId,10),896===planId||8961===planId||8962===planId||898===planId||8981===planId||8982===planId||899===planId||8991===planId||8992===planId},this.isExideTropPlan=function(planId){return planId=parseInt(planId,10),939===planId},this.isICICITropPlan=function(planId){return planId=parseInt(planId,10),949===planId},this.populateOptionsList=function(min,max,interval){for(var arr=[],i=min;i<=max;){var obj={};obj.name=i,obj.id=i,arr.push(obj),i=parseInt(i)+interval}return arr},this.checkForValueAndPush=function(optionList,value){var valueFound=!1,value=parseInt(value);if(optionList&&value){for(var i=0;i<=optionList.length;i++)valueFound||(valueFound=!!optionList[i]&&optionList[i].id===value);valueFound||optionList.push({name:value,id:value})}return optionList},this.isDHFLPlan=function(planId){return planId=parseInt(planId,10),886===planId||887===planId||888===planId},this.isDHFLMonthlyPlan=function(planId){return planId=parseInt(planId,10),887===planId||888===planId},this.isSbiPoornaSuraksha=function(planId){return planId=parseInt(planId,10),890===planId},this.dropRiderSelectionCookie=function(){if("undefined"==typeof $cookies.get("Rider_Selected")){var now=new Date,time=now.getTime(),expireTime=time+72e5,expireDate=new Date(expireTime);$cookies.put("Rider_Selected",!0,{expires:expireDate})}},this.scrollToError=function(){setTimeout(function(){var errorMessage=$(".scroll-to-error-message:visible").first(),offset=errorMessage.offset(),vpane=errorMessage.parents("v-pane");errorMessage.length>0&&(vpane.length>0&&!vpane.hasClass("is-expanded")&&vpane.find("v-pane-header").click(),setTimeout(function(){offset=errorMessage.offset(),$("html, body").animate({scrollTop:offset.top-200},"slow")},100))},100)},this.hideAegoniTermPlan=function(planId,preQuotesInfo,policyCoverage){if(this.isAegonPlan(planId))if(preQuotesInfo.customerAge<40){if(!(policyCoverage<=70||99==policyCoverage))return!0}else if(preQuotesInfo.customerAge>=40&&!(policyCoverage<=70||75==policyCoverage||80==policyCoverage||99==policyCoverage))return!0;return!1},this.askPermission=function(data,message){return new Promise(function(resolve,reject){const permissionResult=Notification.requestPermission(function(result){resolve(result)});permissionResult&&permissionResult.then(resolve,reject)}).then(function(permissionResult){"granted"==permissionResult&&subscribeUserToPush().then(function(pushResponse){var input=data,pushResponseJSON=JSON.parse(JSON.stringify(pushResponse));input.pushNotification=pushResponseJSON.keys.auth,input.auth=pushResponseJSON.keys.auth,input.key=pushResponseJSON.keys.key,input.p256dh=pushResponseJSON.keys.p256dh,input.endpoint=pushResponseJSON.endpoint,input.expirationTime=pushResponseJSON.expirationTime,ServerUtilityService.postWebService(pushNotification,input),message||this.displayNotification(message,data.leadId)})})},this.findDifference=function(a,b){return Math.abs(a-b)},this.displayNotification=function(message,leadId){"granted"==Notification.permission&&navigator.serviceWorker.getRegistration().then(function(reg){var options={body:message,icon:"/images/pb512x512.png",vibrate:[100,50,100],data:{dateOfArrival:Date.now(),primaryKey:leadId},actions:[{action:"explore",title:"Explore this new world",icon:"/images/rightIcon.png"},{action:"close",title:"Close notification",icon:"/images/crosscheck.png"}]};reg.showNotification("Policybazaar",options)})}}function ServerUtilityService($http){"use strict";return this.getWebService=function(url,queryString){return queryString=angular.isDefined(queryString)?queryString:null,$http({url:url,method:"GET",params:{v:(new Date).getTime()},cache:!1})},this.getWebServiceWithCreds=function(url,queryString){return queryString=angular.isDefined(queryString)?queryString:null,$http({method:"GET",withCredentials:!0,params:{v:(new Date).getTime()},url:url})},this.postWebService=function(url,input){return $http.post(url,input).success(function(data,status,headers,config){return data}).error(function(data,status,headers,config){return data})},this.putWebService=function(url,input){return $http.post(url,input).success(function(data,status,headers,config){return data}).error(function(data,status,headers,config){return data})},this}CommonServiceTerm.$inject=["$rootScope","$cookies","$q","ServerUtilityService","$localStorage","$routeParams","$log","$http"],ServerUtilityService.$inject=["$http"],angular.module("TermCommon",[]),angular.module("TermCommon").directive("onlyNum",function(){return function(scope,element,attrs){var keyCode=[8,9,37,39,46,48,49,50,51,52,53,54,55,56,57,96,97,98,99,100,101,102,103,104,105];element.bind("keydown",function(event){_.contains(keyCode,event.which)&&!event.shiftKey||(scope.$apply(function(){scope.$eval(attrs.onlyNum),event.preventDefault()}),event.preventDefault())}),element.on("copy cut paste drop",function(){return!1})}}),angular.module("TermCommon").directive("onlyNumAddCommas",["$filter",function($filter){var keyCode=[8,9,37,39,46,48,49,50,51,52,53,54,55,56,57,96,97,98,99,100,101,102,103,104,105];return{restrict:"E",scope:{det:"=",addClass:"@",minLength:"@",maxLength:"@",changeValues:"&",getFocusOut:"&",getFocusIn:"&",placeText:"@",inputName:"@",inputId:"@",isReqd:"@",isDisabled:"@"},link:function(scope,element,attrs){var input=$(element).find("input")[0],cursorPositionStart=0;element.bind("keydown",function(event){if(!_.contains(keyCode,event.which)||event.shiftKey)scope.$apply(function(){event.preventDefault()}),event.preventDefault();else if(8==event.which||46==event.which||39==event.which||37==event.which);else if(9==event.which){var x=angular.copy(scope.det);void 0!==x&&(x=x.replace(/,/g,"")),scope.$apply(function(){scope.det=$filter("addCommas")(x)})}}),element.bind("keyup",function(event){if(input.selectionStart&&(cursorPositionStart=input.selectionStart),8==event.which||46==event.which||39==event.which||37==event.which);else{void 0!==element[0].firstChild&&(scope.valueOfFiled=element[0].firstChild.value);var x=angular.copy(scope.det);if(void 0!==x&&(x=x.replace(/,/g,"")),scope.$apply(function(){scope.det=$filter("addCommas")(x)}),scope.det)var subString=scope.det.substring(cursorPositionStart,cursorPositionStart+1);","===subString&&(cursorPositionStart+=1),input.setSelectionRange&&input.setSelectionRange(cursorPositionStart,cursorPositionStart)}}),scope.formatOnBlur=function(){var x=angular.copy(scope.det);void 0!==x&&"string"==typeof x&&(x=x.replace(/,/g,"")),scope.det=$filter("addCommas")(x)}},template:'<input id="{{inputId}}" type="tel" class="{{addClass}}" name="{{inputName}}" minlength="{{minLength}}" maxlength="{{maxLength}}" placeholder="{{placeText}}" ng-model="det"  ng-change="changeValues({message:det})" ng-focus="getFocusIn({message:det})" ng-blur="formatOnBlur();getFocusOut({message:det})" ng-required="{{isReqd}}" ng-disabled="{{isDisabled}}"/>'}}]),angular.module("TermCommon").directive("onlyAlphabetsWithSpace",[function(){return{require:"ngModel",link:function(scope,element,attrs,modelCtrl){modelCtrl.$parsers.push(function(inputValue){if(void 0===inputValue)return"";var transformedInput=inputValue.replace(/[^a-zA-Z\s]/g,"");return transformedInput!=inputValue&&(modelCtrl.$setViewValue(transformedInput),modelCtrl.$render()),element.bind("blur",function(event){var fieldValue=element.val();fieldValue=fieldValue.replace(/^\s+|\s+$/g,""),element.val(fieldValue)}),transformedInput})}}}]),angular.module("TermCommon").directive("myMaxlength",function(){return{require:"ngModel",link:function(scope,element,attrs,ngModelCtrl){function fromUser(text){if(text){var type=typeof text,value=angular.copy(text).toString();if(value.length>maxlength){var transformedInput=value.substring(0,maxlength);return"number"==type&&(transformedInput=parseInt(transformedInput)),ngModelCtrl.$setViewValue(transformedInput),ngModelCtrl.$render(),transformedInput}}return text}var maxlength=Number(attrs.myMaxlength);ngModelCtrl.$parsers.push(fromUser)}}}),angular.module("TermCommon").directive("onlyDigits",function(){return{require:"ngModel",link:function(scope,element,attr,ngModelCtrl){function fromUser(text){if(text){var transformedInput=text.replace(/[^0-9]/g,"");return transformedInput!==text&&(ngModelCtrl.$setViewValue(transformedInput),ngModelCtrl.$render()),transformedInput}}ngModelCtrl.$parsers.push(fromUser)}}}),angular.module("TermCommon").directive("autoFillableField",function(){return{restrict:"A",require:"?ngModel",link:function(scope,element,attrs,ngModel){setInterval(function(){var prev_val="";angular.isUndefined(attrs.xAutoFillPrevVal)||(prev_val=attrs.xAutoFillPrevVal),element.val()!=prev_val&&(angular.isUndefined(ngModel)?(element.trigger("input"),element.trigger("change"),element.trigger("keyup"),attrs.xAutoFillPrevVal=element.val()):""==element.val()&&ngModel.$pristine||(attrs.xAutoFillPrevVal=element.val(),scope.$apply(function(){ngModel.$setViewValue(element.val())})))},300)}}}),angular.module("TermCommon").directive("onlyAlphabetsWithSpace",[function(){return{require:"ngModel",link:function(scope,element,attrs,modelCtrl){modelCtrl.$parsers.push(function(inputValue){if(void 0===inputValue)return"";var transformedInput=inputValue.replace(/[^a-zA-Z\s]/g,"");return transformedInput!=inputValue&&(modelCtrl.$setViewValue(transformedInput),modelCtrl.$render()),element.bind("blur",function(event){var fieldValue=element.val();fieldValue=fieldValue.replace(/^\s+|\s+$/g,""),element.val(fieldValue)}),transformedInput})}}}]),angular.module("TermCommon").directive("scrollMe",["$timeout","$location","$window","$routeParams","$rootScope",function($timeout,$location,$window,$routeParams,$rootScope){return function(scope,element,attrs){angular.element(document).ready(function(){if(screen.width>=768){var leftFilterTop=(angular.element(document.querySelector(".quote-head")),216);if($rootScope.pTabName&&$rootScope.pTabName.tropPlans&&(leftFilterTop=250),null!==$location.$$path.match("quotes")){var fixedClassName=angular.isDefined($routeParams.sub_product)&&1==$routeParams.sub_product?"fixed-top-monthly":"";angular.element($window).bind("scroll",function(){$(window).scrollTop()>=leftFilterTop?(angular.element(document.querySelector(".quote-head")).addClass("fixed-quote-head "+fixedClassName).removeClass("fadeOut").addClass("fadeIn"),angular.element(document.querySelector(".left-fixed-tab")).addClass("quote-side").removeClass("fadeOut").addClass("fadeIn")):(angular.element(document.querySelector(".quote-head")).removeClass("fixed-quote-head "+fixedClassName).removeClass("fadeIn"),angular.element(document.querySelector(".left-fixed-tab")).removeClass("quote-side").removeClass("fadeIn"))})}}})}}]),angular.module("TermCommon").directive("compareHeaderFix",["$timeout","$location","$window","$routeParams","$rootScope",function($timeout,$location,$window,$routeParams,$rootScope){return function(scope,element,attrs){angular.element(document).ready(function(){if(screen.width>=768){var leftFilterTop=(angular.element(document.querySelector(".compare-head")),216);if($rootScope.pTabName&&$rootScope.pTabName.tropPlans&&(leftFilterTop=250),null!==$location.$$path.match("compare")){angular.isDefined($routeParams.sub_product)&&1==$routeParams.sub_product?"fixed-top-monthly":"";angular.element($window).bind("scroll",function(){$(window).scrollTop()>=leftFilterTop?angular.element(document.querySelector(".compare-head")).addClass("compare-header-fixed"):angular.element(document.querySelector(".compare-head")).removeClass("compare-header-fixed")})}}})}}]),angular.module("TermCommon").directive("scrollMeDeng",["$timeout","$location","$window","$routeParams",function($timeout,$location,$window,$routeParams){return function(scope,element,attrs){angular.element(document).ready(function(){null!==$location.$$path.match("product")&&(window.pageYOffset>100&&screen.width>=768&&angular.element(document.querySelector(".plan-tot-prem")).addClass("fixed-dengue-head").removeClass("fadeOut").addClass("fadeIn"),angular.element($window).bind("scroll",function(){var elem=angular.element(document.querySelector(".plan-det-dengue")),premElem=angular.element(document.querySelector(".plan-tot-prem")),navElem=angular.element(document.querySelector(".nav-div")),leftFilterTop=100;$(window).scrollTop()>=leftFilterTop?(screen.width>=768&&(null!==elem&&void 0!==elem&&elem.addClass("fixed-dengue-head").removeClass("fadeOut").addClass("fadeIn"),null!==premElem&&void 0!==premElem&&premElem.addClass("fixed-dengue-head").removeClass("fadeOut")),navElem.addClass("fixed-dengue-head").removeClass("fadeOut").addClass("fadeIn")):(screen.width>=768&&(null!==elem&&void 0!==elem&&elem.removeClass("fixed-dengue-head").removeClass("fadeIn"),null!==premElem&&void 0!==premElem&&premElem.removeClass("fixed-dengue-head")),navElem.removeClass("fixed-dengue-head").removeClass("fadeIn"))}))})}}]),angular.module("TermCommon").directive("ngEnter",function(){return function(scope,element,attrs){element.bind("keydown keypress",function(event){13===event.which&&(scope.$apply(function(){scope.$eval(attrs.ngEnter)}),event.preventDefault())})}}),angular.module("TermCommon").filter("addCommas",function(){return function(value){if(void 0!==value&&null!==value){if(value.toString().indexOf(",")!=-1&&(value=value.replace(/,/g,"")),void 0!==value){value=value.toString().replace(/,/g,""),value+="";var x=value.split("."),x1=x[0],x2=x.length>1?"."+x[1]:"",lastThree=x1.substring(x1.length-3),otherNumbers=x1.substring(0,x1.length-3);""!==otherNumbers&&(lastThree=","+lastThree);var res=otherNumbers.replace(/\B(?=(\d{2})+(?!\d))/g,",")+lastThree;return res+x2}return""}}}),angular.module("TermCommon").filter("amountToString",["CommonServiceTerm",function(CommonServiceTerm){return function(value){return void 0!==value&&null!==value?(value=CommonServiceTerm.removeCommas(value),CommonServiceTerm.changeDisplayNumberFormat(value)):""}}]),angular.module("TermCommon").filter("truncated",function(){return function(value,num){if(void 0!=value){var value=value.toTitleCase();return value.length>num&&(value=value.substr(0,num)+"..."),value}return""}}),angular.module("TermCommon").filter("trimSpecialCharacter",function(){return function(str,delimeter){return delimeter=angular.isDefined(delimeter)?delimeter:"_",angular.isDefined(str)&&str?str.replace(delimeter," "):""}}),angular.module("TermCommon").filter("recalculatePremium",function(){return function(premium,planId){return premium}}),angular.module("TermCommon").filter("maskPhoneNumber",function(){return function(phoneNumber){if(phoneNumber){for(var arr=phoneNumber.toString().split(""),length=phoneNumber.toString().length,middlePart="",i=0;i<=length-5;i++)middlePart=middlePart.concat("*");var finalOutput=middlePart+arr[length-4]+arr[length-3]+arr[length-2]+arr[length-1];return finalOutput}}}),angular.module("TermCommon").filter("trustedhtml",function($sce){return $sce.trustAsHtml}),angular.module("TermCommon").service("CommonServiceTerm",CommonServiceTerm),angular.module("TermCommon").service("ServerUtilityService",ServerUtilityService);